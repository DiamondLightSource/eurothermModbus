<?xml version="1.0" ?>
<components arch="linux-x86_64">
	<asyn.AsynIP name="$(port)" noAutoConnect="$(ipNoAutoConnect=False)" noProcessEos="True" port="$(ipaddress):$(tcpport=502)"/>
	<EPICS_BASE.StartupCommand at_end="False" command="asynSetOption(&quot;$(port)&quot;, 0, &quot;disconnectOnReadTimeout&quot;, &quot;Y&quot;)" name="disconnectOnReadTimeout"/>
	<modbus.modbusInterpose linktype="rtu" name="MB.INTERPOSE" portname="$(port)" timeoutmsec="2000" writedelaymsec="0"/>
	<modbus.modbusPort datatype="INT16" modbusfunction="3" modbuslen="1" modbusstartaddr="-1" plctype="" pollmsec="1000" portname="$(modbus_prefix)_MASTER_RX" slaveaddr="1" tcpportname="$(port)"/>
	<modbus.modbusPort datatype="INT16" modbusfunction="6" modbuslen="1" modbusstartaddr="-1" plctype="" pollmsec="0" portname="$(modbus_prefix)_MASTER_TX" slaveaddr="1" tcpportname="$(port)"/>
	<records.bi DESC="manual/auto" DISV="0" DTYP="asynUInt32Digital" INP="@asynMask($(modbus_prefix)_MASTER_RX,273,1,1000)MODBUS_DATA" ONAM="Manual" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" ZNAM="Automatic" record="$(device):LOOP1:MAN:RBV"/>
	<records.bi DESC="loop1 autotune" DISV="0" DTYP="asynUInt32Digital" INP="@asynMask($(modbus_prefix)_MASTER_RX,270,1,1000)MODBUS_DATA" ONAM="On" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" ZNAM="Off" record="$(device):LOOP1:AUTOTUNE:RBV"/>
	<records.bi DESC="Enable/Disable polling" ONAM="ON" SCAN="Passive" VAL="1" ZNAM="OFF" record="$(device):ENABLE"/>
	<records.bo DTYP="asynUInt32Digital" ONAM="Manual" OUT="@asynMask($(modbus_prefix)_MASTER_TX,273,1,1000)MODBUS_DATA" ZNAM="Automatic" record="$(device):LOOP1:MAN"/>
	<records.bo DTYP="asynUInt32Digital" ONAM="On" OUT="@asynMask($(modbus_prefix)_MASTER_TX,270,1,1000)MODBUS_DATA" ZNAM="Off" record="$(device):LOOP1:AUTOTUNE"/>
	<records.ai ASLO="0.1" DESC="Temperature readback" DISV="0" DTYP="asynInt32" EGU="C" FLNK="$(device):AUTODISABLE" INP="@asyn($(modbus_prefix)_MASTER_RX,1,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:PV:RBV"/>
	<records.ai ASLO="0.1" DESC="setpoint readback" DISV="0" DTYP="asynInt32" EGU="C" INP="@asyn($(modbus_prefix)_MASTER_RX,2,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:SP:RBV"/>
	<records.ai ASLO="0.1" DESC="working setpoint readback" DISV="0" DTYP="asynInt32" EGU="C" INP="@asyn($(modbus_prefix)_MASTER_RX,5,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:WSP:RBV"/>
	<records.ai ASLO="0.1" DESC="output" DISV="0" DTYP="asynInt32" EGU="%" INP="@asyn($(modbus_prefix)_MASTER_RX,3,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:O:RBV"/>
	<records.ai ASLO="0.1" DISV="0" DTYP="asynInt32" EGU="C" INP="@asyn($(modbus_prefix)_MASTER_RX,6,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:P:RBV"/>
	<records.ai DISV="0" DTYP="asynInt32" EGU="sec" INP="@asyn($(modbus_prefix)_MASTER_RX,8,1000)MODBUS_DATA" PREC="0" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:I:RBV"/>
	<records.ai DISV="0" DTYP="asynInt32" EGU="sec" INP="@asyn($(modbus_prefix)_MASTER_RX,9,1000)MODBUS_DATA" PREC="0" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:D:RBV"/>
	<records.ai ASLO="0.1" DISV="0" DTYP="asynInt32" EGU="$(RREGU=C/s)" INP="@asyn($(modbus_prefix)_MASTER_RX,35,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:RR:RBV"/>
	<records.ai ASLO="0.1" DISV="0" DTYP="asynInt32" EGU="%" INP="@asyn($(modbus_prefix)_MASTER_RX,30,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:OUTPHI:RBV"/>
	<records.ai ASLO="0.1" DISV="0" DTYP="asynInt32" EGU="%" INP="@asyn($(modbus_prefix)_MASTER_RX,31,1000)MODBUS_DATA" PREC="1" SCAN="$(scan=1 second)" SDIS="$(device):ENABLE" record="$(device):LOOP1:OUTPLO:RBV"/>
	<records.calcout CALC="A=0" DESC="Disable polling in case of read error" DOPT="Use CALC" FLNK="$(device):ENABLE" INPA="$(device):LOOP1:PV:RBV.SEVR" OOPT="When Zero" OUT="$(device):ENABLE" SCAN="Passive" record="$(device):AUTODISABLE"/>
	<records.ao ASLO="0.1" DESC="Setpoint" DRVH="1000" DRVL="-273" DTYP="asynInt32" EGU="C" OUT="@asyn($(modbus_prefix)_MASTER_TX,2,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:SP"/>
	<records.ao ASLO="0.1" DESC="Output" DRVH="100" DRVL="-100" DTYP="asynInt32" OUT="@asyn($(modbus_prefix)_MASTER_TX,3,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:O"/>
	<records.ao ASLO="0.1" DESC="proportional param" DTYP="asynInt32" OUT="@asyn($(modbus_prefix)_MASTER_TX,6,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:P"/>
	<records.ao DESC="integral-param" DTYP="asynInt32" OUT="@asyn($(modbus_prefix)_MASTER_TX,8,1000)MODBUS_DATA" PREC="0" record="$(device):LOOP1:I"/>
	<records.ao DESC="derivative-param" DTYP="asynInt32" OUT="@asyn($(modbus_prefix)_MASTER_TX,9,1000)MODBUS_DATA" PREC="0" record="$(device):LOOP1:D"/>
	<records.ao ASLO="0.1" DESC="ramprate" DTYP="asynInt32" OUT="@asyn($(modbus_prefix)_MASTER_TX,35,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:RR"/>
	<records.ao ASLO="0.1" DRVH="100" DRVL="-100" DTYP="asynInt32" EGU="%" OUT="@asyn($(modbus_prefix)_MASTER_TX,30,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:OUTPHI"/>
	<records.ao ASLO="0.1" DRVH="100" DRVL="-100" DTYP="asynInt32" EGU="%" OUT="@asyn($(modbus_prefix)_MASTER_TX,31,1000)MODBUS_DATA" PREC="1" record="$(device):LOOP1:OUTPLO"/>
</components>
